# golang 研修

## 質問回答

- 変数宣言が 4 種類あるのはなぜか
  - 正直理由はわからない。本に書いているように使おう
- 明示的な初期化無しで文字列を連結に使用しているが、これは実際には明示的な初期化を行ったほうが良いのか
  - go ではゼロ値が決まっているのでそれを理解して行えば明示的な初期化は必要ない
- p make 関数で領域を確保したときに領域数が指定されていないが、これは不足時に追加されるということでいいのか？
  - 構文的には指定できるが、そもそも map はメモリを犠牲にして O(1)を実現するもので、bucket(ハッシュテーブル)の大きさを可変にしないといけないため、map 自体の大きさを指定することに意味は無い
- p 型が違うものに対して同じ range を利用できるのはなぜか
  - 実際は型によって range の振る舞いが違う
- \_ は繰り返し利用しても怒られないの？
  - \_ は変数では無いので繰り返し使っても怒られない
- なぜ事前宣言と予約語に分けられているのか
  - わからない
- go に assert がないのは？
  - go のテストを書くのにまた別のことを勉強しないといけないということを避けたい
  - assert では結局出力では何かわからないのでなしにしてる
- init 関数が複数あるのはなぜ？
  - init を意味のある単位で分けたい場合 + わざわざ関数定義をしたくない場合
    - あまり使用されない
  - パッケージの import 時にそのパッケージの init 関数は呼ばれる
    - つまり, import \_ "hoge" のようなものは利用しないが init 関数を呼びたい場合に使用
- go が近年サーバーサイドで採用されてきた理由は？
  - 1 秒間にさばかないといけないリクエストが増え、軽量であることが求められる
  - 軽量で動作(goroutine)
    - スケジューリングを go のランタイムで行っている
  - デプロイが楽
  - クロスコンパイルが楽
  -

## その他の話

- O(1)はどのように実現している？
  - ハッシュ値を計算したときに一意に特定されることが条件
  - しかし、bucket に保持できる要素数は決まっているのでそこにマッピングしないといけない
  - Java などでは linklist を作成することで衝突に対処している
  - ただ要素が溢れた場合再マッピングし直す
- 定数について
  - const は定数宣言
  - go では定数は 256 ビットを保証している
  - コンパイル時に定数を計算している(コンパイラが行っている)
  - 定数は言語仕様上型を持っていない
- go では web 系が簡単に書ける
- 標準ライブラリがあるものは標準ライブラリを使う(当たり前)
- testing.b.N は徐々に増やしながら意味のある値を取れるまで回してくれる
- ベンチマークで標準偏差も欲しいのでは？
  - とりあえずここではできない
  - データを乱数で生成した場合などではベンチマークの値は意味を成さないことがある
- コンストラクターは存在しない
  - 明示的な初期化が必ず必要な場合には new 関数を用いて生成するのが一般的
- 空の構造体などは変更をする手段がないため実態が 1 つでも良いので同じアドレスを指す場合もある
  - 空の構造体はよく利用する
  - 不変のものは 1 つあれば十分
    - コンパイラは面倒見てくれないので自分で考えて書かないといけない
- インポートはディレクトリのパスを指定しているだけで、その中のパッケージ名はファイルの中まで見ないとわからないので異なるパッケージ名が存在すればインポートのディレクトリ名と呼び出し時の名前が異なる(そのため、ディレクトリ名とパッケージ名は一致させるのが通例)
